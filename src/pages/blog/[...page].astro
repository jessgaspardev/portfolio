---
import Layout from "../../layouts/Main.astro"

// content collections
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
export const getStaticPaths = (async ({paginate}) => {
    const posts = await getCollection("blog", ({data}) => !data.isDraft)
    return paginate(posts.sort((a,b) => new Date(b.data.publishedDate).getTime() - new Date(a.data.publishedDate).getTime()), {pageSize: 20})
}) satisfies GetStaticPaths;

const { page } = Astro.props;

// Components
import Container from "../../components/elements/Container.astro";
import Heading from "../../components/elements/Heading.astro";
import BlogCard from "../../components/elements/BlogCard.astro";
---

<Layout pageTitle="Blog">
    <Container class="flex flex-col gap-16 items-center">
        <Heading tagName="h1" tagSize="h2">Blog</Heading>
        <section aria-label="Blog posts">
            {page.data.map((post) => <BlogCard post={post} />)}
        </section>
    </Container>
</Layout>